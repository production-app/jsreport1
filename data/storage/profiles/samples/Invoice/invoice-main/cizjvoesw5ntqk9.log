{"type":"operationStart","subtype":"profile","data":{"_id":"NOkVUJgXwDZkJZau","timestamp":"2023-04-29T09:14:26.664Z","state":"queued","mode":"full","creationDate":"2023-04-29T09:14:26.666Z","modificationDate":"2023-04-29T09:14:26.666Z","shortid":"UrzO_5G","$entitySet":"profiles"},"doDiffs":false,"timestamp":1682759666665,"id":"6c80umcr2wmatj0","previousOperationId":null,"operationId":"mv1mu7kjsh9ea4r"}
{"type":"log","level":"info","message":"Render request 28 queued for execution and waiting for available worker","previousOperationId":"mv1mu7kjsh9ea4r","timestamp":1682759666665,"id":"meqk5e35ftmnsqg"}
{"type":"operationStart","subtype":"render","name":"invoice-main","previousOperationId":"mv1mu7kjsh9ea4r","timestamp":1682759666675,"id":"dwvewk787a3i0t9","previousEventId":"6c80umcr2wmatj0","operationId":"gji0o74y9qmopkw","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n@@ -1,0 +1,1 @@\n\\ No newline at end of file\n+{}\n\\ No newline at end of file\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n@@ -1,0 +1,28 @@\n\\ No newline at end of file\n+{\n+  \"template\": {\n+    \"name\": \"invoice-main\",\n+    \"recipe\": \"chrome-pdf\",\n+    \"shortid\": \"rkJTnK2ce\",\n+    \"folder\": {\n+      \"shortid\": \"G3i2B3\"\n+    },\n+    \"engine\": \"handlebars\",\n+    \"data\": {\n+      \"shortid\": \"Sy5S19ncg\"\n+    },\n+    \"chrome\": {\n+      \"printBackground\": true,\n+      \"marginTop\": \"1cm\",\n+      \"marginRight\": \"1cm\",\n+      \"marginBottom\": \"1cm\",\n+      \"marginLeft\": \"1cm\",\n+      \"headerTemplate\": \"\",\n+      \"footerTemplate\": \"\"\n+    },\n+    \"content\": \"<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"utf-8\\\">\\n    <title>Invoice</title>\\n    <link rel=\\\"stylesheet\\\" href=\\\"style.css\\\" media=\\\"all\\\" />\\n  </head>\\n  <body>\\n    <header class=\\\"clearfix\\\">\\n      <div id=\\\"logo\\\">\\n        <img src=\\\"logo.png\\\">\\n      </div>\\n      <div id=\\\"company\\\">\\n        <h2 class=\\\"name\\\">{{invoice.company_details.name}}</h2>\\n        <div>{{invoice.company_details.address}}</div>\\n        <div>{{invoice.company_details.phone}}</div>\\n        <div>{{invoice.company_details.email}}</div>\\n      </div>\\n      </div>\\n    </header>\\n    <main>\\n      <div id=\\\"details\\\" class=\\\"clearfix\\\">\\n        <div id=\\\"client\\\">\\n          <div class=\\\"to\\\">INVOICE TO:</div>\\n          <h2 class=\\\"name\\\">{{invoice.customer_details.name}}</h2>\\n          <div class=\\\"address\\\">{{invoice.customer_details.address}}</div>\\n          <div class=\\\"email\\\">{{invoice.customer_details.email}}</div>\\n        </div>\\n        <div id=\\\"invoice\\\">\\n          <h1>{{invoice.invoice_number}}</h1>\\n          <div class=\\\"date\\\">Date of Invoice: {{invoice.issue_date}}</div>\\n          <div class=\\\"date\\\">Due Date: {{invoice.due_date}}</div>\\n        </div>\\n      </div>\\n      <table border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\\n        <thead>\\n          <tr>\\n            <th class=\\\"no\\\">#</th>\\n            <th class=\\\"desc\\\">DESCRIPTION</th>\\n            <th class=\\\"unit\\\">UNIT PRICE</th>\\n            <th class=\\\"qty\\\">QUANTITY</th>\\n            <th class=\\\"total\\\">TOTAL</th>\\n          </tr>\\n        </thead>\\n        <tbody id=\\\"invoiceItems\\\">\\n\\t\\t{{- index = 1 -}}\\n\\t\\t {{ for item in invoice.items }}\\n          <tr>\\n            <td class=\\\"no\\\">{{index}}</td>\\n            <td class=\\\"desc\\\"><h3>{{item.name}}</h3>{{item.description}}</td>\\n            <td class=\\\"unit\\\">${{item.price}}</td>\\n            <td class=\\\"qty\\\">{{item.quantity}}</td>\\n            <td class=\\\"total\\\">${{item.total_price}}</td>\\n          </tr>\\n\\t\\t  {{index = index + 1}}\\n\\t\\t  {{end}}\\n        </tbody>\\n        <tfoot>\\n          <tr>\\n            <td colspan=\\\"2\\\"></td>\\n            <td colspan=\\\"2\\\">SUBTOTAL</td>\\n            <td>${{invoice.sub_total}}</td>\\n          </tr>\\n          <tr>\\n            <td colspan=\\\"2\\\"></td>\\n            <td colspan=\\\"2\\\">TAX 25%</td>\\n            <td>${{invoice.tax}}</td>\\n          </tr>\\n          <tr>\\n            <td colspan=\\\"2\\\"></td>\\n            <td colspan=\\\"2\\\">GRAND TOTAL</td>\\n            <td>${{invoice.grand_total}}</td>\\n          </tr>\\n        </tfoot>\\n      </table>\\n      <div id=\\\"thanks\\\">Thank you!</div>\\n      <div id=\\\"notices\\\">\\n        <div>NOTICE:</div>\\n        <div class=\\\"notice\\\">A finance charge of 1.5% will be made on unpaid balances after 30 days.</div>\\n      </div>\\n    </main>\\n  </body>\\n</html>\",\n+    \"helpers\": \"function nowPlus20Days() {\\n    var date = new Date()\\n    date.setDate(date.getDate() + 20);\\n    return date.toLocaleDateString();\\n}\\n\\nfunction total(items) {\\n    var sum = 0\\n    items.forEach(function (i) {\\n        console.log('Calculating item ' + i.name + '; you should see this message in debug run')\\n        sum += i.price\\n    })\\n    return sum\\n}\\n\",\n+    \"creationDate\": \"2023-04-29T05:34:26.544Z\",\n+    \"modificationDate\": \"2023-04-29T09:14:23.929Z\"\n+  },\n+  \"data\": {}\n+}\n\\ No newline at end of file\n"}}
{"type":"log","timestamp":1682759666675,"level":"info","message":"Starting rendering request 28","meta":{"rootId":"cizjvoesw5ntqk9","id":"cizjvoesw5ntqk9"},"id":"9i4s9f51724tukt","previousOperationId":"gji0o74y9qmopkw"}
{"type":"log","timestamp":1682759666676,"level":"info","message":"Rendering template { name: invoice-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"cizjvoesw5ntqk9","id":"cizjvoesw5ntqk9"},"id":"p9obs6bzrq6mp6t","previousOperationId":"gji0o74y9qmopkw"}
{"type":"log","timestamp":1682759666677,"level":"debug","message":"Adding sample data Sy5S19ncg","meta":{"rootId":"cizjvoesw5ntqk9","id":"cizjvoesw5ntqk9"},"id":"l7rbfwr1ayic33d","previousOperationId":"gji0o74y9qmopkw"}
{"type":"log","timestamp":1682759666680,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"cizjvoesw5ntqk9","id":"cizjvoesw5ntqk9"},"id":"sh1s8x3o5ugr2pu","previousOperationId":"gji0o74y9qmopkw"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1682759666680,"id":"h3aywa85806t1s9","previousEventId":"dwvewk787a3i0t9","operationId":"2lfri46ci4vbjck","previousOperationId":"gji0o74y9qmopkw","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n@@ -1,1 +1,1 @@\n-{}\n\\ No newline at end of file\n+{\"reportName\":\"invoice-main\",\"headers\":{}}\n\\ No newline at end of file\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n@@ -3,1 +3,1 @@\n-    \"name\": \"invoice-main\",\n+    \"shortid\": \"rkJTnK2ce\",\n@@ -5,4 +5,0 @@\n-    \"shortid\": \"rkJTnK2ce\",\n-    \"folder\": {\n-      \"shortid\": \"G3i2B3\"\n-    },\n@@ -13,0 +9,4 @@\n+    \"name\": \"invoice-main\",\n+    \"folder\": {\n+      \"shortid\": \"G3i2B3\"\n+    },\n@@ -25,1 +25,3 @@\n-    \"modificationDate\": \"2023-04-29T09:14:23.929Z\"\n+    \"modificationDate\": \"2023-04-29T09:14:23.929Z\",\n+    \"_id\": \"z4glX7yzCWNWxW17\",\n+    \"scripts\": []\n@@ -27,1 +29,19 @@\n-  \"data\": {}\n+  \"data\": {\n+    \"number\": \"123\",\n+    \"seller\": {\n+      \"name\": \"Next Step Webs, Inc.\",\n+      \"road\": \"12345 Sunny Road\",\n+      \"country\": \"Sunnyville, TX 12345\"\n+    },\n+    \"buyer\": {\n+      \"name\": \"Acme Corp.\",\n+      \"road\": \"16 Johnson Road\",\n+      \"country\": \"Paris, France 8060\"\n+    },\n+    \"items\": [\n+      {\n+        \"name\": \"Website design\",\n+        \"price\": 300\n+      }\n+    ]\n+  }\n"}}
{"type":"log","timestamp":1682759666682,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"cizjvoesw5ntqk9","id":"cizjvoesw5ntqk9"},"id":"254a0gx6mnk003h","previousOperationId":"2lfri46ci4vbjck"}
{"type":"log","timestamp":1682759666712,"level":"warn","message":"Error when processing render request 28\n(because) error when evaluating engine handlebars for template /samples/Invoice/invoice-main\n(because) parse error on line 45:\n...\">\t\t{{- index = 1 -}}\t\t {{ for item in\n----------------------^\nExpecting 'EQUALS', got 'CLOSE'\n\n(sandbox.js line 27:18)\nError: Parse error on line 45:\n...\">\t\t{{- index = 1 -}}\t\t {{ for item in\n----------------------^\nExpecting 'EQUALS', got 'CLOSE'\n    at Parser.parseError (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\parser.js:267:19)\n    at Parser.parse (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\parser.js:336:30)\n    at parseWithoutProcessing (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\base.js:46:33)\n    at HandlebarsEnvironment.parse (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\base.js:52:13)\n    at Object.precompile (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\compiler.js:485:17)\n    at HandlebarsEnvironment.hb.precompile (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars.js:42:40)\n    at Object.compile (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:34:52)\n    at Object.compile (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:26:43)\n    at executionFn (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:195:42)\n    at sandbox.js:27:18\nwrapped by:\nError: Error when evaluating engine handlebars for template /samples/Invoice/invoice-main\n(because) parse error on line 45:\n...\">\t\t{{- index = 1 -}}\t\t {{ for item in\n----------------------^\nExpecting 'EQUALS', got 'CLOSE'\n    at module.exports (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:286:33)\n    at async engine.engine (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:179:19\n    at async Domain.<anonymous> (C:\\workspace\\jsReport\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:141:19)","meta":{"rootId":"cizjvoesw5ntqk9","id":"cizjvoesw5ntqk9"},"id":"ckkdzmddsmk6dlr","previousOperationId":"2lfri46ci4vbjck"}
{"type":"log","timestamp":1682759666712,"level":"warn","message":"Rendering request 28 finished with error in 48 ms","meta":{"rootId":"cizjvoesw5ntqk9","id":"cizjvoesw5ntqk9"},"id":"e9zaq3iahyypkr6","previousOperationId":"2lfri46ci4vbjck"}
{"type":"error","timestamp":1682759666717,"entity":{"shortid":"rkJTnK2ce","name":"invoice-main","content":"<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <title>Invoice</title>\n    <link rel=\"stylesheet\" href=\"style.css\" media=\"all\" />\n  </head>\n  <body>\n    <header class=\"clearfix\">\n      <div id=\"logo\">\n        <img src=\"logo.png\">\n      </div>\n      <div id=\"company\">\n        <h2 class=\"name\">{{invoice.company_details.name}}</h2>\n        <div>{{invoice.company_details.address}}</div>\n        <div>{{invoice.company_details.phone}}</div>\n        <div>{{invoice.company_details.email}}</div>\n      </div>\n      </div>\n    </header>\n    <main>\n      <div id=\"details\" class=\"clearfix\">\n        <div id=\"client\">\n          <div class=\"to\">INVOICE TO:</div>\n          <h2 class=\"name\">{{invoice.customer_details.name}}</h2>\n          <div class=\"address\">{{invoice.customer_details.address}}</div>\n          <div class=\"email\">{{invoice.customer_details.email}}</div>\n        </div>\n        <div id=\"invoice\">\n          <h1>{{invoice.invoice_number}}</h1>\n          <div class=\"date\">Date of Invoice: {{invoice.issue_date}}</div>\n          <div class=\"date\">Due Date: {{invoice.due_date}}</div>\n        </div>\n      </div>\n      <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n        <thead>\n          <tr>\n            <th class=\"no\">#</th>\n            <th class=\"desc\">DESCRIPTION</th>\n            <th class=\"unit\">UNIT PRICE</th>\n            <th class=\"qty\">QUANTITY</th>\n            <th class=\"total\">TOTAL</th>\n          </tr>\n        </thead>\n        <tbody id=\"invoiceItems\">\n\t\t{{- index = 1 -}}\n\t\t {{ for item in invoice.items }}\n          <tr>\n            <td class=\"no\">{{index}}</td>\n            <td class=\"desc\"><h3>{{item.name}}</h3>{{item.description}}</td>\n            <td class=\"unit\">${{item.price}}</td>\n            <td class=\"qty\">{{item.quantity}}</td>\n            <td class=\"total\">${{item.total_price}}</td>\n          </tr>\n\t\t  {{index = index + 1}}\n\t\t  {{end}}\n        </tbody>\n        <tfoot>\n          <tr>\n            <td colspan=\"2\"></td>\n            <td colspan=\"2\">SUBTOTAL</td>\n            <td>${{invoice.sub_total}}</td>\n          </tr>\n          <tr>\n            <td colspan=\"2\"></td>\n            <td colspan=\"2\">TAX 25%</td>\n            <td>${{invoice.tax}}</td>\n          </tr>\n          <tr>\n            <td colspan=\"2\"></td>\n            <td colspan=\"2\">GRAND TOTAL</td>\n            <td>${{invoice.grand_total}}</td>\n          </tr>\n        </tfoot>\n      </table>\n      <div id=\"thanks\">Thank you!</div>\n      <div id=\"notices\">\n        <div>NOTICE:</div>\n        <div class=\"notice\">A finance charge of 1.5% will be made on unpaid balances after 30 days.</div>\n      </div>\n    </main>\n  </body>\n</html>"},"lineNumber":45,"property":"content","statusCode":400,"weak":true,"logged":true,"previousOperationId":"2lfri46ci4vbjck","id":"hdfd82rhvsc44n5","stack":"Error: Parse error on line 45:\n...\">\t\t{{- index = 1 -}}\t\t {{ for item in\n----------------------^\nExpecting 'EQUALS', got 'CLOSE'\n    at Parser.parseError (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\parser.js:267:19)\n    at Parser.parse (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\parser.js:336:30)\n    at parseWithoutProcessing (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\base.js:46:33)\n    at HandlebarsEnvironment.parse (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\base.js:52:13)\n    at Object.precompile (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars\\compiler\\compiler.js:485:17)\n    at HandlebarsEnvironment.hb.precompile (C:\\workspace\\jsReport\\node_modules\\handlebars\\dist\\cjs\\handlebars.js:42:40)\n    at Object.compile (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:34:52)\n    at Object.compile (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:26:43)\n    at executionFn (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:195:42)\n    at sandbox.js:27:18\nwrapped by:\nError: Error when evaluating engine handlebars for template /samples/Invoice/invoice-main\n(because) parse error on line 45:\n...\">\t\t{{- index = 1 -}}\t\t {{ for item in\n----------------------^\nExpecting 'EQUALS', got 'CLOSE'\n    at module.exports (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:286:33)\n    at async engine.engine (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async C:\\workspace\\jsReport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:179:19\n    at async Domain.<anonymous> (C:\\workspace\\jsReport\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:141:19)","message":"Error when evaluating engine handlebars for template /samples/Invoice/invoice-main\n(because) parse error on line 45:\n...\">\t\t{{- index = 1 -}}\t\t {{ for item in\n----------------------^\nExpecting 'EQUALS', got 'CLOSE'\n\n(sandbox.js line 27:18)"}
